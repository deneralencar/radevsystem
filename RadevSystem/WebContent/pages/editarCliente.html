<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<div class="page-content">                                      
    <div class="row">
        <div class="col-md-12">
            <!-- BEGIN VALIDATION STATES-->
            <div class="portlet box grey-cascade">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="fa icon-user"> </i> Editar Cliente
                    </div>
                </div>
                <div class="portlet-body form">
                    <!-- BEGIN FORM-->
                    <form id="form_sample_2" class="form-horizontal">
                        <div class="form-body">
                            <div id ="alert" class="alert alert-danger display-hide">
                                <button class="close" data-close="alert"></button>
                                Falha no cadastro. Preencha todos os campos abaixo.
                            </div>
                            <div id ="alertServidor" class="alert alert-danger display-hide">
                                <button class="close" data-close="alert"></button>
                                Falha no cadastro. Erro no servodor.
                            </div>
                            <div id ="alert2" class="alert alert-success display-hide">
                                <button class="close" data-close="alert"></button>
                                Cadastro realizado com sucesso!
                            </div>
                            <div id ="alertEmail" class="alert alert-success display-hide">
                                <button class="close" data-close="alert"></button>
                                Email incorreto.
                            </div>
                            <div id ="alertCPF" class="alert alert-success display-hide">
                                <button class="close" data-close="alert"></button>
                                CPF/CNPJ incorreto.
                            </div>
                            <div id ="alertRG" class="alert alert-success display-hide">
                                <button class="close" data-close="alert"></button>
                                RG incorreto.
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3">Nome <span class="required">
                                        * </span>
                                </label>
                                <div class="col-md-4">
                                    <div class="input-icon right">
                                        <i class="fa"></i>
                                        <input type="text" class="form-control" id="nome"/>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3">Email <span class="required">
                                        * </span>
                                </label>
                                <div class="col-md-4">
                                    <div class="input-icon right">
                                        <i class="fa"></i>
                                        <input type="text" class="form-control" id="email"/>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3">Tipo de Pessoa <span class="required">
                                        * </span>
                                </label>
                                <div class="col-md-4">
                                    <div class="input-icon right">
                                       <select class="form-control" id="person_type">
											<option value="F" selected> Pessoa Física </option>
											<option value="J"> Pessoa Jurídica </option>
										</select>	
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3">CPF/CNPJ <span class="required">
                                        * </span>
                                </label>
                                <div class="col-md-4">
                                    <div class="input-icon right">
                                        <i class="fa"></i>
                                        <input type="text" disabled class="form-control" id="cpf"/>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3">RG/Inscr. Estadual<span class="required">
                                        * </span>
                                </label>
                                <div class="col-md-4">
                                    <div class="input-icon right">
                                        <i class="fa"></i>
                                        <input type="text" class="form-control" id="rg"/>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="control-label col-md-3">Endereço<span class="required">
                                        * </span>
                                </label>
                                <div class="col-md-4">
                                    <div class="input-icon right">
                                        <i class="fa"></i>
                                        <input type="text" class="form-control" id="endereco"/>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-md-3">Estado<span class="required">
                                        * </span>
                                </label>
                                <div class="col-md-4">
                                    <div class="input-icon right">
                                        <i class="fa"></i>
                                        <input type="text" class="form-control" id="estado"/>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-md-3">Cidade<span class="required">
                                        * </span>
                                </label>
                                <div class="col-md-4">
                                    <div class="input-icon right">
                                        <i class="fa"></i>
                                        <input type="text" class="form-control" id="cidade"/>
                                    </div>
                                </div>
                            </div>
	
                            
                            <div class="form-group">
                                <label class="control-label col-md-3">DDD<span class="required">
                                        * </span>
                                </label>
                                <div class="col-md-4">
                                    <div class="input-icon right">
                                        <i class="fa"></i>
                                        <input type="text" class="form-control" id="ddd"/>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="control-label col-md-3">Fone<span class="required">
                                        * </span>
                                </label>
                                <div class="col-md-4">
                                    <div class="input-icon right">
                                        <i class="fa"></i>
                                        <input type="tel" class="form-control" id="fone"/>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-md-3">Limite Crédito<span class="required">
                                        * </span>
                                </label>
                                <div class="col-md-4">
                                    <div class="input-icon right">
                                        <i class="fa"></i>
                                        <input type="number" class="form-control" id="limitecredito"/>
                                    </div>
                                </div>
                            </div>
                            
                            
                        </div>
                        <div class="form-actions">
                            <div class="row">
                                <div class="col-md-offset-3 col-md-9">
                                    <button type="submit" id="salvar" class="btn green">Salvar</button>
                                    <button type="button" id="cancelar" class="btn default">Cancelar</button>
                                </div>
                            </div>
                        </div>
                    </form>
                    <!-- END FORM-->
                </div>
            </div>
            <!-- END VALIDATION STATES-->
        </div>
    </div>
</div>
	<script src="assets/admin/pages/scripts/table-managed.js"></script>
	<script src="js/mask.js" type="text/javascript"></script>
	<script>
	jQuery(document).ready(function () {
    	TableManaged.init();
    	
   	   $("#cancelar").click(function () {
              $("#painel-ajax").load("manterClientes.html");
          });

        $("#salvar").click(function () {
        	$.ajax({
                url: '/RadevSystem/ClienteServiceAltera',
                type: 'post',
                dataType: 'json',
                data: formData,
                success: function (data) {
                    if(data == true){
                    	$('#alert2').fadeIn(500);
                        setTimeout( "$('#alert2').fadeOut(1500);",2500);  
                        setTimeout("$('#painel-ajax').load('manterClientes.html');", 2500);
                    }
                    else{
                    	errorMsg("Falha no servidor.");
                    }
                },
                error: function(e) { 
                    $('#alertServidor').fadeIn(500);
                    setTimeout( "$('#alertServidor').fadeOut(1500);",2500);
                    console.log(e.responseText);
                }
            });
        	        	
        });

		peencherCampos();
		//$("#cpf").mask("99.999.999/9999-99");
	});

     function peencherCampos(){
         preencheDados(getIdCliente());		
     }
    
     function preencheDados(idCliente){
     	var res = {id: idCliente};
   	 	$.ajax({
	    	url: '/RadevSystem/ClienteServiceGetCliente', //listarCliente.php',
	        type: 'post',
	        dataType: 'json',
	        data: res,
	        success: function (data) {
	        	/*$.each(data.clientelist, function(i, object) {		            	
            		mapValue[object.id] = object.valor;
            		mapName[object.id] = object.descricao;
            	});*/
	        	
		        var object = data.cliente[0];
		        
		        $("#nome").val(object.nome);
		        $("#email").val(object.email);
		        $("#cpf").val(object.cpf);
		        $("#rg ").val(object.rg);
		        $("#endereco").val(object.endereco);
		        $("#estado").val(object.estado);
		        $("#cidade").val(object.cidade);
		        $("#ddd").val(object.ddd);
		        $("#fone").val(object.fone);
		        $("#limitecredito").val(object.limitecredito);       
	     	},
	        error: function(e) { 
	        	console.log(e.responseText);
			}
		});
     }
     
     
</script>